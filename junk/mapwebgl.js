// いろいろヤバい書き方してる気はする。
// 参考文献：インプレスジャパン「HTML5ガイドブック」
var image=new Image();
image.src="BlackShroudTile20101125.png";
function G1Map(){
	// JSONとか理解してないし。
	var map=[];
	map[ 0]=[ 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[ 1]=[14, 9,13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[ 2]=[ 0,13, 9,14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[ 3]=[ 0, 0, 0,21,13, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[ 4]=[ 0, 0, 0,10,10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[ 5]=[ 0,13,21,21,21, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[ 6]=[ 0,13,13, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[ 7]=[ 0, 0, 0, 0,14, 9,13,28, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0,21,13, 0, 0, 0, 0,37,37, 0, 0, 0, 0, 0];
	map[ 8]=[ 0, 0, 0, 0,28,13,17, 4, 9,21,16, 1, 0, 0, 0, 0, 0, 0, 0,13,21, 0, 0, 0,31,25,25,31, 0, 0, 0, 0];
	map[ 9]=[ 0, 0, 0,15, 4, 5, 5,27,13,17, 9, 9,28, 0, 0, 0, 0, 0, 0,27, 4,28, 0, 0,28,24,24,22,37, 0,15, 0];
	map[10]=[ 0, 0, 0, 1,27,16, 1, 0, 0,16, 9, 9, 4, 1, 9,13, 0, 0, 0,13, 9,28,16, 2, 4, 6,16,30, 0, 0, 1, 0];
	map[11]=[ 0,16, 2,15, 0, 0, 1, 0, 0,28,16,16,27, 0,13, 9, 1, 1, 3,11,11, 4,16, 0,27,30,16, 7, 1, 1,15, 0];
	map[12]=[ 2,16, 0, 0, 0, 0,15, 9,21, 4, 5, 5,16, 0, 0, 0, 0, 0, 0, 9,21,27, 0, 0, 0,23, 0, 0, 0, 0, 0, 0];
	map[13]=[ 0, 0, 0, 0, 0, 0, 0, 9,21,27,16,14,17,13,16,16, 1, 0,13, 9, 6,30,31, 0,31,29, 0, 0, 0, 0, 0, 0];
	map[14]=[ 0, 0, 0, 0, 0,16, 1,14, 1, 0, 0, 0,13,17, 5,25,24, 1,13, 9,17,13,22,30, 8,22,31, 0, 0, 0, 0, 0];
	map[15]=[ 0, 0, 0, 0, 0, 0, 0,16, 5, 0, 0, 0,36,32, 3,25,25,26, 0,27,12,12,28, 8,14,14,31, 0, 0, 0, 0, 0];
	map[16]=[ 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0,35,41,36, 7,29,31,31, 0, 0, 9,13,14,14,30, 1,30, 0, 0, 0, 0, 0];
	map[17]=[ 0, 0, 0, 0, 0, 0, 0,36,32, 0,35,41,35,16, 5,15, 0, 0, 0,27, 4,28, 1,30,22,14, 8,31, 0, 0, 0, 0];
	map[18]=[ 0, 0, 0, 0, 0, 0, 0,42,34, 0,36,41,33, 0, 0,15, 1,15, 0,16, 1,14, 5,22, 8,14,24,25,37, 0, 0, 0];
	map[19]=[ 0, 0, 0, 0, 0, 0,35,41,35, 0, 0,42,34, 0, 0, 0, 0, 5, 3,17, 9,14,14, 8,30, 1,25,24,26, 0, 0, 0];
	map[20]=[ 0, 0, 0, 0, 0, 0,35,41,42,36, 0,43,35, 0, 0, 0, 0, 1, 0,13,21,22,13,11,13,14, 9,10,13, 0, 0, 0];
	map[21]=[ 0, 0, 0, 0, 0, 0, 0,36,42,41,43,41,35, 0, 0, 0,13, 9, 0, 0, 7,26,10,63,20,10,20,63,10, 0, 0, 0];
	map[22]=[ 0, 0, 0, 0, 0, 0, 0,33,42,41,35,36, 0, 0, 0, 0,13, 9,16, 0,21,13,13,11,11,10,20,63,10, 0, 0, 0];
	map[23]=[ 0, 0, 0, 0, 0, 0, 0,42, 0,42, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,13,21, 0,14, 0, 0,10,63,13, 0, 0, 0];
	map[24]=[ 0, 0, 0, 0, 0, 0, 0,32,42,33, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,27, 4,28, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[25]=[ 0, 0, 0, 0, 0, 0, 0,16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,14,14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[26]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[27]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[28]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[29]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[30]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[31]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	var mod=[];
	mod[ 0]=[ 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[ 1]=[ 3, 0, 0, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[ 2]=[ 4, 2, 2, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[ 3]=[ 4, 4, 4, 2, 0, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[ 4]=[ 4, 4, 4, 3, 1, 0, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[ 5]=[ 4, 3, 3, 1, 0, 0, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[ 6]=[ 4, 2, 1, 4, 1, 0, 4, 4, 4, 4, 4, 1, 4, 4, 4, 4, 4, 4, 4, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[ 7]=[ 4, 4, 4, 4, 3, 0, 4, 3, 4, 4, 4, 3, 4, 4, 4, 4, 4, 4, 4, 2, 0, 4, 4, 4, 4, 0, 0, 4, 4, 4, 4, 4];
	mod[ 8]=[ 4, 4, 4, 4, 3, 2, 3, 0, 0, 3, 2, 3, 4, 4, 4, 4, 4, 4, 4, 2, 0, 4, 4, 4, 1, 3, 0, 2, 4, 4, 4, 4];
	mod[ 9]=[ 4, 4, 4, 3, 0, 2, 3, 3, 2, 3, 0, 1, 3, 4, 4, 4, 4, 4, 4, 4, 1, 0, 4, 4, 3, 3, 2, 1, 1, 4, 3, 0];
	mod[10]=[ 4, 4, 4, 3, 3, 3, 1, 4, 4, 3, 3, 2, 0, 2, 0, 0, 4, 4, 4, 3, 1, 3, 0, 0, 0, 2, 2, 2, 4, 4, 1, 4];
	mod[11]=[ 4, 0, 0, 1, 4, 4, 3, 4, 4, 3, 3, 1, 3, 4, 2, 2, 0, 0, 0, 3, 1, 0, 2, 4, 3, 0, 0, 0, 0, 0, 1, 4];
	mod[12]=[ 0, 2, 4, 4, 4, 4, 2, 0, 3, 0, 2, 3, 1, 4, 4, 4, 4, 4, 4, 3, 0, 3, 4, 4, 4, 3, 4, 4, 4, 4, 4, 4];
	mod[13]=[ 4, 4, 4, 4, 4, 4, 4, 3, 0, 3, 3, 3, 1, 0, 1, 0, 0, 4, 3, 1, 1, 1, 2, 4, 1, 3, 4, 4, 4, 4, 4, 4];
	mod[14]=[ 4, 4, 4, 4, 4, 0, 0, 2, 3, 4, 4, 4, 2, 3, 3, 3, 1, 1, 2, 2, 1, 0, 1, 1, 1, 1, 3, 4, 4, 4, 4, 4];
	mod[15]=[ 4, 4, 4, 4, 4, 4, 4, 0, 3, 4, 4, 4, 3, 0, 3, 2, 1, 2, 4, 4, 3, 1, 0, 1, 3, 1, 2, 4, 4, 4, 4, 4];
	mod[16]=[ 4, 4, 4, 4, 4, 4, 4, 4, 3, 4, 4, 3, 0, 1, 1, 0, 3, 0, 4, 4, 3, 1, 0, 2, 3, 3, 2, 4, 4, 4, 4, 4];
	mod[17]=[ 4, 4, 4, 4, 4, 4, 4, 3, 0, 4, 0, 2, 1, 0, 0, 0, 4, 4, 4, 4, 1, 4, 1, 0, 3, 3, 2, 2, 4, 4, 4, 4];
	mod[18]=[ 4, 4, 4, 4, 4, 4, 4, 1, 1, 4, 2, 1, 1, 4, 4, 2, 0, 0, 4, 1, 1, 0, 3, 2, 0, 1, 0, 0, 1, 4, 4, 4];
	mod[19]=[ 4, 4, 4, 4, 4, 4, 3, 4, 1, 4, 4, 1, 1, 4, 4, 4, 4, 1, 0, 1, 1, 3, 2, 1, 1, 3, 2, 2, 0, 4, 4, 4];
	mod[20]=[ 4, 4, 4, 4, 4, 4, 3, 3, 2, 0, 4, 1, 1, 4, 4, 4, 4, 3, 4, 2, 0, 1, 3, 0, 0, 3, 0, 0, 0, 4, 4, 4];
	mod[21]=[ 4, 4, 4, 4, 4, 4, 4, 2, 0, 3, 2, 2, 1, 4, 4, 4, 3, 1, 4, 4, 1, 3, 3, 0, 2, 0, 1, 4, 1, 4, 4, 4];
	mod[22]=[ 4, 4, 4, 4, 4, 4, 4, 0, 2, 2, 2, 1, 4, 4, 4, 4, 2, 2, 2, 4, 2, 0, 2, 2, 2, 2, 0, 4, 1, 4, 4, 4];
	mod[23]=[ 4, 4, 4, 4, 4, 4, 4, 1, 0, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 2, 0, 4, 3, 4, 4, 3, 4, 1, 4, 4, 4];
	mod[24]=[ 4, 4, 4, 4, 4, 4, 4, 2, 0, 2, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[25]=[ 4, 4, 4, 4, 4, 4, 4, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 0, 2, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[26]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[27]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[28]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[29]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[30]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[31]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	
	this.map=map;
	this.modifier=mod;
}
//様子見。東部森林
function G2Map(){
	var map=[];
	var map=[];
//	map[ 0]=[ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31];
	map[ 0]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[ 1]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[ 2]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,37, 0,45,10,45,31, 0, 0, 0, 0, 0, 0, 0, 0];
	map[ 3]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,30,29,10,63,10,22,31, 0, 0, 0, 0, 0, 0, 0];

	map[ 4]=[ 0, 0, 0, 0, 0, 0,37,31, 0, 0, 0, 0, 0, 0, 0,16,14,26,22, 0,45,19,45,29,26, 0, 0, 0, 0, 0, 0, 0];
	map[ 5]=[ 0, 0, 0, 0,31,31,22,22,29,37, 0, 0, 0, 0, 0,31, 6, 0, 0, 0, 0, 0, 0,25,25, 0, 0, 0, 0, 0, 0, 0];
	map[ 6]=[ 0, 0, 0,31,16,22, 0,39, 0,31, 0, 0, 0, 0, 0, 0,16,26, 0, 0, 0, 0, 0,25,25,31, 0, 0, 0, 0, 0, 0];
	map[ 7]=[ 0, 0,16, 6,14, 0, 0, 0, 0, 0,37, 0, 0, 0, 0, 0,31,22, 0, 0, 0, 0, 0, 0,31,31, 0, 0, 0, 0, 0, 0];

	map[ 8]=[ 0, 0,31,30,26, 0, 0, 0, 0, 0,31, 0, 0, 0, 0, 0,31,38, 0, 0, 0, 0, 0,39,31,23, 0, 0, 0, 0, 0, 0];
	map[ 9]=[ 0, 0, 0,31,22, 0, 0, 0, 0,22,22,37, 0, 0,31,26, 0, 0, 0, 0, 0, 0,26,39,39,29, 0, 0, 0, 0, 0, 0];
	map[10]=[ 0, 0, 0, 0,26, 0, 0, 0, 0, 0,16,31, 0, 0,30, 0, 0, 0, 0, 0, 0, 0,26,30,39,22,31, 0, 0, 0, 0, 0];
	map[11]=[ 0, 0, 0, 0,31, 0, 0, 0, 0, 0,14, 6,16,29, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,22,31, 0, 0, 0, 0, 0, 0];

	map[12]=[ 0, 0, 0, 0, 0,31, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,26, 0, 0, 0, 0, 0, 0, 0];
	map[13]=[ 0, 0, 0, 0, 0, 0,30,26,22, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,29, 0, 0, 0, 0, 0, 0, 0];
	map[14]=[ 0, 0, 0, 0, 0, 0,26,30,26, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,30, 0, 0, 0, 0, 0, 0, 0];
	map[15]=[ 0, 0, 0, 0, 0, 0,16, 6,14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,29, 0, 0, 0, 0,37, 0, 0];

	map[16]=[ 0, 0, 0,15, 2, 1,16,16, 5,15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,31, 0, 0,29,26, 0, 0, 0,31,30, 0, 0];
	map[17]=[ 0, 0, 0, 1, 0, 0, 0, 0,27, 4,28, 0,13,21, 6,15, 0, 0, 0, 0,31,29,26,25,25,30,29,26,30,26, 0, 0];
	map[18]=[ 0, 0,14,14, 0, 0, 0, 0, 0,21,13,28, 9, 9, 0,15, 5, 9,13,16, 5,16,22,25,25,22,30,14,15, 0, 0, 0];
	map[19]=[ 0, 0, 2, 0, 0, 0, 0, 0, 0,13,17, 4, 5,15,22,30, 6,13, 9,16, 6,29,30,13,13,30,22,21, 9, 0, 0, 0];

	map[20]=[ 2, 2,15, 0, 0, 0, 0, 0, 0, 0,16,27, 0, 2,31,28, 1,25,25,22,16,26,22,13,21,22,13,20,10, 0, 0, 0];
	map[21]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 1, 4, 5,25,25,30,22,30, 8, 1,17,10,20,20,21,14,16, 0];
	map[22]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,16, 9,21,15, 0,27,21,13,22,31,31,29,30,22,13,10,20,10,15,14, 0, 0];
	map[23]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,13,17, 2, 2, 5,21,13,31, 0, 0,31,29,31,37, 0,13,13, 0, 0, 0, 0];

	map[24]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,16, 5, 0, 0,16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[25]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,16, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[26]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[27]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[28]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[29]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[30]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	map[31]=[ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
	var mod=[];
//	mod[ 0]=[ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31];
	mod[ 0]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[ 1]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[ 2]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 0, 4, 3, 0, 0, 2, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[ 3]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 0, 2, 3, 4, 1, 3, 3, 4, 4, 4, 4, 4, 4, 4];

	mod[ 4]=[ 4, 4, 4, 4, 4, 4, 0, 1, 4, 4, 4, 4, 4, 4, 4, 0, 1, 1, 4, 4, 2, 0, 1, 1, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[ 5]=[ 4, 4, 4, 4, 2, 1, 0, 0, 2, 1, 4, 4, 4, 4, 4, 0, 3, 4, 4, 4, 4, 4, 4, 3, 0, 4, 4, 4, 4, 4, 4, 4];
	mod[ 6]=[ 4, 4, 4, 1, 1, 0, 0, 0, 0, 2, 4, 4, 4, 4, 4, 4, 3, 4, 4, 4, 4, 4, 4, 2, 1, 3, 4, 4, 4, 4, 4, 4];
	mod[ 7]=[ 4, 4, 0, 0, 2, 0, 0, 0, 0, 0, 4, 4, 4, 4, 4, 4, 0, 4, 4, 4, 4, 4, 4, 4, 4, 1, 4, 4, 4, 4, 4, 4];

	mod[ 8]=[ 4, 4, 0, 3, 2, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 1, 4, 4, 4, 4, 4, 4, 4, 4, 3, 4, 4, 4, 4, 4, 4];
	mod[ 9]=[ 4, 4, 4, 0, 2, 4, 4, 4, 4, 4, 0, 1, 4, 4, 1, 1, 0, 4, 4, 4, 4, 4, 4, 4, 4, 3, 4, 4, 4, 4, 4, 4];
	mod[10]=[ 4, 4, 4, 4, 0, 4, 4, 4, 4, 4, 1, 2, 4, 4, 0, 0, 0, 4, 4, 4, 4, 4, 4, 4, 4, 0, 2, 4, 4, 4, 4, 4];
	mod[11]=[ 4, 4, 4, 4, 0, 4, 4, 4, 4, 4, 3, 0, 2, 2, 4, 0, 0, 4, 4, 4, 4, 4, 4, 4, 1, 3, 4, 4, 4, 4, 4, 4];

	mod[12]=[ 4, 4, 4, 4, 4, 0, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 2, 4, 4, 4, 4, 4, 4, 4];
	mod[13]=[ 4, 4, 4, 4, 4, 4, 0, 2, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 3, 4, 4, 4, 4, 4, 4, 4];
	mod[14]=[ 4, 4, 4, 4, 4, 4, 0, 2, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 2, 4, 4, 4, 4, 4, 4, 4];
	mod[15]=[ 4, 4, 4, 4, 4, 4, 0, 2, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 0, 4, 4, 4, 4, 0, 4, 4];

	mod[16]=[ 4, 4, 4, 3, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 4, 4, 4, 4, 4, 4, 0, 4, 4, 2, 2, 4, 4, 4, 1, 2, 4, 4];
	mod[17]=[ 4, 4, 4, 3, 4, 4, 4, 4, 0, 1, 0, 4, 3, 3, 2, 0, 4, 4, 4, 4, 0, 0, 1, 3, 0, 1, 2, 1, 3, 3, 4, 4];
	mod[18]=[ 4, 4, 0, 2, 4, 4, 4, 4, 4, 2, 0, 3, 3, 2, 4, 2, 2, 0, 0, 0, 2, 2, 1, 2, 1, 3, 0, 0, 0, 4, 4, 4];
	mod[19]=[ 4, 4, 3, 4, 4, 4, 4, 4, 4, 2, 3, 0, 0, 0, 1, 3, 1, 2, 2, 2, 4, 3, 2, 3, 0, 1, 1, 2, 1, 4, 4, 4];

	mod[20]=[ 0, 0, 1, 4, 4, 4, 4, 4, 4, 4, 3, 3, 4, 1, 3, 3, 3, 3, 0, 1, 3, 3, 0, 2, 0, 1, 3, 1, 1, 4, 4, 4];
	mod[21]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 1, 0, 0, 3, 2, 1, 1, 2, 1, 0, 2, 1, 0, 1, 3, 0, 0, 2, 4];
	mod[22]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 0, 0, 3, 1, 4, 3, 2, 0, 2, 3, 0, 0, 1, 0, 2, 2, 0, 1, 2, 2, 4, 4];
	mod[23]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 2, 3, 0, 0, 2, 1, 1, 3, 4, 4, 0, 0, 3, 2, 4, 2, 1, 4, 4, 4, 4];

	mod[24]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 0, 3, 4, 4, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[25]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[26]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[27]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[28]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[29]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[30]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	mod[31]=[ 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4];
	
	this.map=map;
	this.modifier=mod;
}
//
function Tile(target){
	this.width=32, this.height=32;
	//誰がいつ初期化するのこれ。
	this.image=image;
	{
		// 表示面となるCANVAS要素。
		// 引数の文字列をidパラメータにもつHTML要素の子要素。
		var canvas=document.createElement("canvas");
		canvas.width=this.width*32;
		canvas.height=this.height*32;
		var div=document.getElementById(target);
		div.appendChild(canvas);
		this.ctx=canvas.getContext("2d");
		// 非表示となるバッファ。回転一発変換する頭がなかったので。
		this.bufferCanvas=document.createElement("canvas");
		this.bufferCanvas.width=this.width*32;
		this.bufferCanvas.height=this.height*32;
		this.bufferCtx=this.bufferCanvas.getContext("2d");		
	}
	this.drawTile=function(dstX, dstY, tileNum, rotate){
		// パレットからtileNum番の画像を選んで…
		var rx=tileNum % 8,	ry=Math.floor(tileNum/8);
		var srcX=rx*this.width, srcY=ry*this.height;
		// パレットからバッファへコピー。随時回転。
		{
			this.bufferCtx.save();
			this.bufferCtx.translate(this.width/2, this.height/2);
			this.bufferCtx.rotate((Math.PI/2)*rotate);
			this.bufferCtx.drawImage(this.image,
					srcX*2, srcY*2, this.width*2, this.height*2,
					-this.width/2, -this.height/2, this.width, this.height
				);
			this.bufferCtx.restore();
		}
		// バッファから表示面へコピー
		this.ctx.drawImage(this.bufferCanvas,
			0, 0, this.width, this.height,
			dstX*this.width, dstY*this.height, this.width, this.height
		);
	};
}
function start(){
	aTile=new Tile("div");
	g1Map=new G1Map();
	draw(g1Map);
}
function map1OnClick(){
	g1Map=new G1Map();
	draw(g1Map);
}
function map2OnClick(){
	g2Map=new G2Map();
	draw(g2Map);
}
function draw(area){
	for(var j=0; j<32; j++){
		for(var i=0; i<32; i++){
			aTile.drawTile(i, j, area.map[j][i], area.modifier[j][i]);
		}
	}
}
