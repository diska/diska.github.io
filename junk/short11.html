<canvas id="cnvs" width="256px" height="256px"></canvas><hr/>
<textarea id="vs" class="vs" width="256px" cols="40" rows="10"></textarea>
<textarea id="fs" class="fs" width="256px" cols="40" rows="10"></textarea><hr/>
<textarea id="log" class="log" width="256px" cols="40" rows="10"></textarea>
<style>
body{background-color: darkslategrey}
canvas{width:256px; height:256px;background-color: white}
textarea{background-color:palegoldenrod}
</style>
<script>
const getp=function(g, src){
	const FS=g.FRAGMENT_SHADER,VS=g.VERTEX_SHADER;
	const CS=g.COMPILE_STATUS, LS=g.LINK_STATUS;
	var log="";	p=g.createProgram();
	g.attachShader(p, cs(VS, src[0]));	g.attachShader(p, cs(FS, src[1]));
	g.linkProgram(p);	log="Link:"+g.getProgramInfoLog(p);
	if(g.getProgramParameter(p, LS)){return p}else{g.deleteProgram(p);throw log}
	function cs(t, src){
		var s=g.createShader(t);	g.shaderSource(s, src);
		g.compileShader(s);
		log=src+"\nCompile:"+g.getShaderInfoLog(s);
		if(g.getShaderParameter(s, CS)){return s}else{g.deleteShader(s);throw log}
	}
}
</script>
<script>
const UI={};
UI.CNVS=document.getElementById("cnvs"); UI.LOG=document.getElementById("log");
UI.VS=document.getElementById("vs"); UI.FS=document.getElementById("fs");
UI.VS.value=`void main(){\n\tgl_PointSize=64.;\n\tgl_Position=vec4(0,0,0,1);\n}`;
UI.FS.value=`precision mediump float;\nuniform float time;
void main(){\n\tgl_FragColor=vec4(1);\n\tgl_FragColor.r=sin(time);\n}`;
const gl=UI.CNVS.getContext("webgl");
var uTime;
function updateProg(){
	try{
		var pg=getp(gl, [UI.VS.value,UI.FS.value]);
		gl.useProgram(pg);
		uTime=gl.getUniformLocation(pg, "time");
		UI.LOG.value="ok!";
	}catch(e){UI.LOG.value=e;}
}	updateProg();
UI.CNVS.addEventListener("click", updateProg);
function draw(now){
	var time=now/1000;	gl.uniform1f(uTime, time);
	gl.clearColor(0.0, 0.0, 0.0, 1.0);	gl.clear(gl.COLOR_BUFFER_BIT);
	gl.drawArrays(gl.POINTS, 0,1);
	requestAnimationFrame(draw);
}	requestAnimationFrame(draw);
</script>