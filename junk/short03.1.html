<h1>uniform</h1>
<hr/><canvas id="cnvs" width="256px" height="256px"></canvas><hr/>
<input id="size" type="range" value="0"></input>
<script>
const getp=function(g, src){
	const FS=g.FRAGMENT_SHADER,VS=g.VERTEX_SHADER;
	const CS=g.COMPILE_STATUS, LS=g.LINK_STATUS;
	var p=g.createProgram();
	g.attachShader(p, cs(VS, src[0]));	g.attachShader(p, cs(FS, src[1]));
	g.linkProgram(p);	console.log("Link:"+g.getProgramInfoLog(p));
	if(g.getProgramParameter(p, LS)){return p;}else{g.deleteProgram(p);}
	function cs(t, src){
		var s=g.createShader(t);	g.shaderSource(s, src);
		g.compileShader(s);
		console.log("Shader"+t+":\n"+src+"\nCompile:"+g.getShaderInfoLog(s));
		if(g.getShaderParameter(s, CS)){return s}else{g.deleteShader(s);}
	}
}
const vs=`uniform float sz;attribute vec4 a;void main(){gl_PointSize=float(sz);gl_Position=a;}`;
const fs=`void main(){gl_FragColor.rgba=vec4(gl_PointCoord.x,1,0,1);}`;
const g=document.getElementById("cnvs").getContext("webgl");
const p=getp(g, [vs,fs]); g.useProgram(p);
const UI={	size:document.getElementById("size"),};
const draw=function(){
	g.uniform1f(g.getUniformLocation(p, "sz"), UI.size.value);
	g.clearColor(0,.3,0,1);	g.clear(g.COLOR_BUFFER_BIT);
	g.drawArrays(g.POINTS, 0, 1);
};	draw();
UI.size.addEventListener("input", draw);
</script>
